<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Sentiment & Ethics Analyzer - CivicAI</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2563EB;
            --primary-light: #3B82F6;
            --primary-dark: #1D4ED8;
            --secondary: #64748B;
            --light: #F8FAFC;
            --dark: #1E293B;
            --success: #10B981;
            --warning: #F59E0B;
            --danger: #EF4444;
            --danger-light: #FEE2E2;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            color: var(--dark);
            background-color: #F1F5F9;
            line-height: 1.6;
        }
        
        .navbar {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            padding: 1rem 0;
        }
        
        .navbar-brand {
            font-weight: 700;
            color: var(--primary);
            font-size: 1.5rem;
        }
        
        .nav-link {
            font-weight: 500;
            color: var(--dark);
            margin: 0 0.5rem;
            transition: color 0.3s;
        }
        
        .nav-link:hover {
            color: var(--primary);
        }
        
        .feature-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 3rem 0;
            margin-bottom: 2rem;
        }
        
        .feature-header-content {
            text-align: center;
        }
        
        .feature-icon {
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
        }
        
        .feature-title {
            font-weight: 700;
            margin-bottom: 1rem;
            font-size: 2.2rem;
        }
        
        .feature-subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .form-container {
            background-color: white;
            border-radius: 12px;
            padding: 2.5rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
            margin-bottom: 3rem;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .form-section {
            margin-bottom: 2rem;
        }
        
        .form-section-title {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--light);
            font-size: 1.25rem;
        }
        
        .form-label {
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 0.5rem;
        }
        
        .form-control, .form-select {
            padding: 0.75rem 1rem;
            border: 1px solid #E2E8F0;
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 1rem;
        }
        
        .form-control:focus, .form-select:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }
        
        .aspiration-textarea {
            min-height: 200px;
            resize: vertical;
        }
        
        .btn-primary {
            background-color: var(--primary);
            border-color: var(--primary);
            padding: 0.875rem 2rem;
            font-weight: 600;
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 1rem;
        }
        
        .btn-primary:hover {
            background-color: var(--primary-dark);
            border-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(37, 99, 235, 0.3);
        }
        
        .btn-primary:active {
            transform: translateY(0);
        }
        
        .alert {
            border-radius: 8px;
            padding: 1rem 1.25rem;
            border: none;
            display: flex;
            align-items: flex-start;
        }
        
        .alert-warning {
            background-color: var(--danger-light);
            color: var(--danger);
            border-left: 4px solid var(--danger);
        }
        
        .alert-success {
            background-color: #ECFDF5;
            color: var(--success);
            border-left: 4px solid var(--success);
        }
        
        .alert-danger {
            background-color: #FEF2F2;
            color: var(--danger);
            border-left: 4px solid var(--danger);
        }
        
        .alert-icon {
            margin-right: 0.75rem;
            font-size: 1.25rem;
            margin-top: 0.1rem;
        }
        
        .alert-content {
            flex: 1;
        }
        
        .selected-info {
            background-color: #F0F9FF;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border-left: 4px solid var(--primary);
        }
        
        .selected-info-title {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 0.75rem;
        }
        
        .selected-info-items {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .selected-info-item {
            background-color: white;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
        }
        
        .selected-info-icon {
            color: var(--primary);
            margin-right: 0.5rem;
        }
        
        .word-counter {
            text-align: right;
            font-size: 0.875rem;
            color: var(--secondary);
            margin-top: 0.5rem;
        }
        
        .word-counter.warning {
            color: var(--danger);
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            display: none;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .empty-state {
            text-align: center;
            padding: 3rem;
            color: var(--secondary);
        }
        
        .empty-state-icon {
            font-size: 4rem;
            color: #CBD5E1;
            margin-bottom: 1.5rem;
        }
        
        .ai-analysis-section {
            background-color: #F0F9FF;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border-left: 4px solid var(--primary);
        }
        
        .ai-analysis-title {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
        }
        
        .ai-analysis-title i {
            margin-right: 0.5rem;
        }
        
        .analysis-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .analysis-card {
            background-color: white;
            border-radius: 8px;
            padding: 1.25rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        .analysis-card-title {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--dark);
            display: flex;
            align-items: center;
        }
        
        .analysis-card-title i {
            margin-right: 0.5rem;
        }
        
        .sentiment-positive {
            color: var(--success);
        }
        
        .sentiment-negative {
            color: var(--danger);
        }
        
        .sentiment-neutral {
            color: var(--warning);
        }
        
        .sentiment-score {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .sentiment-label {
            font-size: 0.875rem;
            color: var(--secondary);
        }
        
        .ethics-score-bar {
            height: 8px;
            background-color: #E2E8F0;
            border-radius: 4px;
            overflow: hidden;
            margin: 0.75rem 0;
        }
        
        .ethics-score-fill {
            height: 100%;
            background-color: var(--success);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .ethics-score-text {
            font-weight: 600;
            color: var(--dark);
            text-align: right;
        }
        
        .bias-indicators {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }
        
        .bias-indicator {
            background-color: #FEF3C7;
            color: #92400E;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .bias-indicator.high {
            background-color: #FEE2E2;
            color: #991B1B;
        }
        
        .ai-recommendations {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 8px;
            background-color: #ECFDF5;
            border-left: 4px solid var(--success);
        }
        
        .ai-recommendations-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--success);
        }
        
        .ai-recommendations-list {
            list-style-type: none;
            padding-left: 0;
            margin-bottom: 0;
        }
        
        .ai-recommendations-list li {
            margin-bottom: 0.5rem;
            display: flex;
            align-items: flex-start;
        }
        
        .ai-recommendations-list i {
            color: var(--success);
            margin-right: 0.5rem;
            margin-top: 0.2rem;
        }
        
        .ai-analysis-details {
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid #E2E8F0;
        }
        
        .ai-analysis-details-title {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--dark);
        }
        
        .analysis-detail-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #F1F5F9;
        }
        
        .analysis-detail-label {
            color: var(--secondary);
        }
        
        .analysis-detail-value {
            font-weight: 500;
        }
        
        .ai-processing {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            color: var(--secondary);
        }
        
        .ai-processing i {
            margin-right: 0.5rem;
            animation: pulse 1.5s infinite;
        }
        
        .detected-words {
            margin-top: 0.5rem;
            font-size: 0.875rem;
        }
        
        .detected-words-list {
            background-color: #FEF2F2;
            border-radius: 4px;
            padding: 0.5rem;
            margin-top: 0.25rem;
        }
        
        .detected-word {
            display: inline-block;
            background-color: #FEE2E2;
            color: var(--danger);
            padding: 0.2rem 0.5rem;
            border-radius: 3px;
            margin: 0.1rem;
            font-size: 0.75rem;
        }
        
        @keyframes pulse {
            0% { opacity: 0.6; }
            50% { opacity: 1; }
            100% { opacity: 0.6; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @media (max-width: 768px) {
            .feature-header {
                padding: 2rem 0;
            }
            
            .feature-title {
                font-size: 1.8rem;
            }
            
            .form-container {
                padding: 1.5rem;
            }
            
            .selected-info-items {
                flex-direction: column;
            }
            
            .analysis-results {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light sticky-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <i class="fas fa-brain me-2"></i>CivicAI
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html#home">Beranda</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html#features">Fitur</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html#dashboard">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="aspirasi.html">Aspirasi</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html#leaderboard">Leaderboard</a>
                    </li>
                </ul>
                <a href="aspirasi.html" class="btn btn-primary ms-3">Analisis Aspirasi</a>
            </div>
        </div>
    </nav>

    <!-- Feature Header -->
    <div class="feature-header">
        <div class="container">
            <div class="feature-header-content">
                <div class="feature-icon">
                    <i class="fas fa-robot"></i>
                </div>
                <h1 class="feature-title">AI Sentiment & Ethics Analyzer</h1>
                <p class="feature-subtitle">Sistem AI canggih yang menganalisis sentimen dan etika dari setiap aspirasi untuk memastikan keadilan, netralitas, dan kualitas konten.</p>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container">
        <!-- Selected Information -->
        <div class="selected-info">
            <h3 class="selected-info-title">Analisis AI Real-time</h3>
            <div class="selected-info-items">
                <div class="selected-info-item">
                    <i class="fas fa-brain selected-info-icon"></i>
                    <span>Sentiment Analysis</span>
                </div>
                <div class="selected-info-item">
                    <i class="fas fa-balance-scale selected-info-icon"></i>
                    <span>Ethics Scoring</span>
                </div>
                <div class="selected-info-item">
                    <i class="fas fa-shield-alt selected-info-icon"></i>
                    <span>Bias Detection</span>
                </div>
                <div class="selected-info-item">
                    <i class="fas fa-ban selected-info-icon"></i>
                    <span>SARA Detection</span>
                </div>
            </div>
        </div>

        <!-- AI Analysis Section -->
        <div class="form-container">
            <div class="ai-analysis-section">
                <h3 class="ai-analysis-title"><i class="fas fa-chart-line"></i> Analisis AI untuk Aspirasi</h3>
                <p>Masukkan teks aspirasi Anda di bawah untuk dianalisis oleh sistem AI kami. Analisis akan mencakup sentimen, etika, deteksi bias, dan konten SARA.</p>
                
                <div class="mb-3">
                    <label for="aiAnalysisText" class="form-label">Teks Aspirasi untuk Analisis</label>
                    <textarea class="form-control aspiration-textarea" id="aiAnalysisText" rows="6" placeholder="Masukkan teks aspirasi Anda di sini..."></textarea>
                    <div class="word-counter" id="wordCounter">0/5000 karakter</div>
                </div>
                
                <div class="d-flex justify-content-between">
                    <button class="btn btn-primary" id="analyzeBtn">
                        <i class="fas fa-robot me-2"></i>Analisis dengan AI
                    </button>
                    <button class="btn btn-outline-secondary" id="clearAnalysisBtn">
                        <i class="fas fa-eraser me-2"></i>Hapus
                    </button>
                </div>
                
                <div id="aiAnalysisResults" style="display: none;">
                    <div class="analysis-results">
                        <div class="analysis-card">
                            <h4 class="analysis-card-title"><i class="fas fa-smile"></i> Analisis Sentimen</h4>
                            <div class="sentiment-score" id="sentimentScore">0%</div>
                            <div class="sentiment-label" id="sentimentLabel">Netral</div>
                            <div class="mt-2" id="sentimentDescription">Teks belum dianalisis</div>
                        </div>
                        
                        <div class="analysis-card">
                            <h4 class="analysis-card-title"><i class="fas fa-balance-scale"></i> Skor Etika</h4>
                            <div class="ethics-score-bar">
                                <div class="ethics-score-fill" id="ethicsScoreFill"></div>
                            </div>
                            <div class="ethics-score-text" id="ethicsScoreText">0%</div>
                            <div class="mt-2" id="ethicsDescription">Teks belum dianalisis</div>
                        </div>
                        
                        <div class="analysis-card">
                            <h4 class="analysis-card-title"><i class="fas fa-exclamation-triangle"></i> Deteksi Bias</h4>
                            <div id="biasLevel">Tidak terdeteksi</div>
                            <div class="bias-indicators" id="biasIndicators">
                                <!-- Bias indicators will be added here -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="ai-recommendations" id="aiRecommendations">
                        <h5 class="ai-recommendations-title"><i class="fas fa-lightbulb"></i> Rekomendasi AI</h5>
                        <ul class="ai-recommendations-list" id="recommendationsList">
                            <!-- Recommendations will be added here -->
                        </ul>
                    </div>
                    
                    <div class="ai-analysis-details">
                        <h5 class="ai-analysis-details-title">Detail Analisis</h5>
                        <div class="analysis-detail-item">
                            <span class="analysis-detail-label">Kata Kunci Positif:</span>
                            <span class="analysis-detail-value" id="positiveKeywords">-</span>
                        </div>
                        <div class="analysis-detail-item">
                            <span class="analysis-detail-label">Kata Kunci Negatif:</span>
                            <span class="analysis-detail-value" id="negativeKeywords">-</span>
                        </div>
                        <div class="analysis-detail-item">
                            <span class="analysis-detail-label">Kata Tidak Pantas:</span>
                            <span class="analysis-detail-value" id="inappropriateWords">-</span>
                        </div>
                        <div class="analysis-detail-item">
                            <span class="analysis-detail-label">Kata SARA Terdeteksi:</span>
                            <span class="analysis-detail-value" id="saraWords">-</span>
                        </div>
                        <div class="analysis-detail-item">
                            <span class="analysis-detail-label">Tingkat Konstruktif:</span>
                            <span class="analysis-detail-value" id="constructiveLevel">-</span>
                        </div>
                    </div>
                </div>
                
                <div class="ai-processing" id="aiProcessing" style="display: none;">
                    <i class="fas fa-cog"></i> AI sedang menganalisis teks...
                </div>
            </div>

            <!-- Ethics Alert (Initially Hidden) -->
            <div class="alert alert-warning mb-4" id="ethicsAlert" style="display: none;">
                <div class="alert-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="alert-content">
                    <strong>Peringatan Etika</strong>
                    <p class="mb-0">Konten yang Anda tuliskan mengandung kata-kata yang tidak sesuai dengan etika publik. Mohon periksa kembali aspirasi Anda sebelum mengirim.</p>
                    <div class="detected-words" id="inappropriateWordsList"></div>
                </div>
            </div>

            <!-- SARA Alert (Initially Hidden) -->
            <div class="alert alert-danger mb-4" id="saraAlert" style="display: none;">
                <div class="alert-icon">
                    <i class="fas fa-ban"></i>
                </div>
                <div class="alert-content">
                    <strong>Konten Negatif/SARA Terdeteksi</strong>
                    <p class="mb-0">Konten yang Anda tuliskan mengandung unsur negatif, ujaran kebencian, atau SARA yang tidak sesuai dengan nilai-nilai kebangsaan.</p>
                    <div class="detected-words" id="saraWordsList"></div>
                </div>
            </div>

            <!-- Success Alert (Initially Hidden) -->
            <div class="alert alert-success mb-4" id="successAlert" style="display: none;">
                <div class="alert-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="alert-content">
                    <strong>Analisis Selesai!</strong>
                    <p class="mb-0">Aspirasi Anda telah dianalisis. Lihat hasil analisis di bawah untuk rekomendasi perbaikan.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <h4 class="mb-3"><i class="fas fa-brain me-2"></i>CivicAI</h4>
                    <p>Platform aspirasi publik berbasis kecerdasan buatan untuk membangun demokrasi digital yang etis, transparan, dan inklusif di Indonesia.</p>
                    <div class="mt-4">
                        <a href="#" class="text-light me-3"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-light me-3"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-light me-3"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-light"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <div class="footer-links">
                        <h5>Navigasi</h5>
                        <ul>
                            <li><a href="index.html#home">Beranda</a></li>
                            <li><a href="index.html#features">Fitur</a></li>
                            <li><a href="index.html#dashboard">Dashboard</a></li>
                            <li><a href="aspirasi.html">Aspirasi</a></li>
                            <li><a href="index.html#leaderboard">Leaderboard</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="footer-links">
                        <h5>Kebijakan</h5>
                        <ul>
                            <li><a href="#">Kebijakan Privasi</a></li>
                            <li><a href="#">Syarat dan Ketentuan</a></li>
                            <li><a href="#">Etika Penggunaan</a></li>
                            <li><a href="#">FAQ</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3 mb-4">
                    <div class="footer-links">
                        <h5>Kontak</h5>
                        <ul>
                            <li><i class="fas fa-map-marker-alt me-2"></i> Surabaya, Indonesia</li>
                            <li><i class="fas fa-envelope me-2"></i> info@civicai.id</li>
                            <li><i class="fas fa-phone me-2"></i> +62 21 1234 5678</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 Anarus. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // DAFTAR KATA KUNCI YANG DITOLAK (SARA & Negatif)
        const inappropriateWords = [
            "bangsat", "anjing", "goblok", "tolol", "bodoh", "idiot", 
            "kontol", "memek", "jancok", "asu", "bajingan", "kampret",
            "jancuk", "jembut", "pentil", "kirik", "kirek", "bego",
            "goblog", "tolol", "bejat", "brengsek", "keparat", "bajul",
            "bangsater", "anjir", "asu", "tai", "taek", "tahi", "kotoran",
            "sampah", "murahan", "hina", "rendahan", "kampungan"
        ];

        const saraWords = [
            "cina", "cino", "cokin", "tionghoa", "taiwan", "taiwanese",
            "jawa", "jowo", "sunda", "sundanese", "batak", "bataknese",
            "papua", "papuan", "ambon", "ambonese", "minang", "minangese",
            "madura", "madurese", "dayak", "dayakese", "bugis", "buginese",
            "melayu", "malay", "islam", "muslim", "kristen", "christian",
            "hindu", "buddha", "buddhist", "katolik", "catholic", "protestan",
            "yahudi", "jewish", "atheis", "atheist", "kafir", "infidel",
            "kristenisasi", "islamisasi", "komunis", "komunisme", "komunisasi",
            "pki", "partai terlarang", "ekstremis", "radikal", "fundamentalis"
        ];

        // Positive sentiment words
        const positiveWords = [
            "bagus", "baik", "mantap", "hebat", "setuju", "dukung", "suka", "senang", 
            "terima kasih", "solusi", "rekomendasi", "usul", "maju", "sukses", "bangga",
            "positif", "konstruktif", "bermanfaat", "membantu", "memuaskan", "puas",
            "kreatif", "inovatif", "inspiratif", "menjanjikan", "optimis", "cerah",
            "perbaikan", "peningkatan", "pengembangan", "kemajuan", "inovasi", "reformasi",
            "dukungan", "apresiasi", "penghargaan", "saran", "gagasan", "ide", "proposal"
        ];

        // Negative sentiment words
        const negativeWords = [
            "buruk", "jelek", "gagal", "tolak", "tidak", "jangan", "protes", "kecewa",
            "menyesal", "masalah", "keluhan", "rusak", "parah", "sulit", "bermasalah",
            "negatif", "merugikan", "menyusahkan", "frustasi", "menyedihkan", "mengecewakan",
            "mengerikan", "menyebalkan", "menjengkelkan", "tidak puas", "kecewa", "menyesalkan",
            "keluhan", "protes", "penolakan", "kritik", "kecaman", "ketidaksetujuan"
        ];

        // Constructive words
        const constructiveWords = [
            "usul", "usulan", "mengusulkan", "mengajukan", "solusi", "rekomendasi", 
            "saran", "ide", "gagasan", "proposal", "rencana", "strategi", "langkah",
            "perbaikan", "peningkatan", "pengembangan", "inovasi", "reformasi", "transformasi",
            "saran", "masukan", "pendapat", "anjuran", "rekomendasi", "solusi", "jalan keluar"
        ];

        // Bias-related words (SARA - Suku, Agama, Ras, Antar-golongan)
        const biasWords = {
            "suku": ["suku", "etnis", "daerah asal", "budaya", "adat", "suku jawa", "suku sunda", "suku batak", "suku papua"],
            "agama": ["agama", "keyakinan", "iman", "ibadah", "ritual", "islam", "kristen", "hindu", "buddha", "katolik"],
            "ras": ["ras", "kulit", "fisik", "keturunan", "kulit hitam", "kulit putih", "ras tertentu"],
            "gender": ["gender", "laki-laki", "perempuan", "pria", "wanita", "maskulin", "feminin"],
            "politik": ["partai", "politik", "pemerintah", "oposisi", "kubu", "golongan", "kelompok"]
        };

        // Word counter for description
        document.getElementById('aiAnalysisText').addEventListener('input', function() {
            const wordCounter = document.getElementById('wordCounter');
            const charCount = this.value.length;
            wordCounter.textContent = `${charCount}/5000 karakter`;
            
            if (charCount > 4500) {
                wordCounter.classList.add('warning');
            } else {
                wordCounter.classList.remove('warning');
            }
        });

        // Function to check for inappropriate words
        function checkInappropriateWords(text) {
            const ethicsAlert = document.getElementById('ethicsAlert');
            const saraAlert = document.getElementById('saraAlert');
            const inappropriateWordsList = document.getElementById('inappropriateWordsList');
            const saraWordsList = document.getElementById('saraWordsList');
            
            let detectedInappropriate = [];
            let detectedSara = [];
            
            // Check for inappropriate words
            inappropriateWords.forEach(word => {
                if (text.toLowerCase().includes(word)) {
                    detectedInappropriate.push(word);
                }
            });
            
            // Check for SARA words
            saraWords.forEach(word => {
                if (text.toLowerCase().includes(word)) {
                    detectedSara.push(word);
                }
            });
            
            // Update alert messages with detected words
            if (detectedInappropriate.length > 0) {
                inappropriateWordsList.innerHTML = `
                    <strong>Kata terdeteksi:</strong>
                    <div class="detected-words-list">
                        ${detectedInappropriate.map(word => `<span class="detected-word">${word}</span>`).join('')}
                    </div>
                `;
            } else {
                inappropriateWordsList.innerHTML = '';
            }
            
            if (detectedSara.length > 0) {
                saraWordsList.innerHTML = `
                    <strong>Kata SARA terdeteksi:</strong>
                    <div class="detected-words-list">
                        ${detectedSara.map(word => `<span class="detected-word">${word}</span>`).join('')}
                    </div>
                `;
            } else {
                saraWordsList.innerHTML = '';
            }
            
            // Show appropriate alerts
            if (detectedSara.length > 0) {
                saraAlert.style.display = 'flex';
                ethicsAlert.style.display = 'none';
            } else if (detectedInappropriate.length > 0) {
                ethicsAlert.style.display = 'flex';
                saraAlert.style.display = 'none';
            } else {
                ethicsAlert.style.display = 'none';
                saraAlert.style.display = 'none';
            }
            
            return { 
                hasInappropriateWord: detectedInappropriate.length > 0, 
                hasSaraWord: detectedSara.length > 0,
                detectedInappropriate,
                detectedSara
            };
        }

        // AI Analysis function
        function analyzeText(text) {
            return new Promise((resolve) => {
                // Show processing indicator
                document.getElementById('aiProcessing').style.display = 'flex';
                document.getElementById('aiAnalysisResults').style.display = 'none';
                
                // Check for inappropriate words first
                const wordCheck = checkInappropriateWords(text);
                
                // Simulate AI processing time
                setTimeout(() => {
                    // Analyze sentiment
                    const sentimentResult = analyzeSentiment(text);
                    
                    // Analyze ethics
                    const ethicsResult = analyzeEthics(text);
                    
                    // Detect bias
                    const biasResult = detectBias(text);
                    
                    // Generate recommendations
                    const recommendations = generateRecommendations(sentimentResult, ethicsResult, biasResult, wordCheck);
                    
                    // Get analysis details
                    const analysisDetails = getAnalysisDetails(text);
                    
                    // Hide processing indicator
                    document.getElementById('aiProcessing').style.display = 'none';
                    document.getElementById('aiAnalysisResults').style.display = 'block';
                    
                    // Show success alert
                    document.getElementById('successAlert').style.display = 'flex';
                    
                    // Resolve with all results
                    resolve({
                        sentiment: sentimentResult,
                        ethics: ethicsResult,
                        bias: biasResult,
                        recommendations: recommendations,
                        details: analysisDetails,
                        wordCheck: wordCheck
                    });
                }, 2000);
            });
        }

        // Analyze sentiment
        function analyzeSentiment(text) {
            const words = text.toLowerCase().split(/\s+/);
            let positiveCount = 0;
            let negativeCount = 0;
            let positiveWordsFound = [];
            let negativeWordsFound = [];
            
            // Count positive and negative words
            words.forEach(word => {
                if (positiveWords.includes(word)) {
                    positiveCount++;
                    if (!positiveWordsFound.includes(word)) {
                        positiveWordsFound.push(word);
                    }
                }
                if (negativeWords.includes(word)) {
                    negativeCount++;
                    if (!negativeWordsFound.includes(word)) {
                        negativeWordsFound.push(word);
                    }
                }
            });
            
            // Calculate sentiment score
            const totalRelevantWords = positiveCount + negativeCount;
            let sentimentScore = 50; // Default neutral
            
            if (totalRelevantWords > 0) {
                sentimentScore = (positiveCount / totalRelevantWords) * 100;
            }
            
            // Determine sentiment label
            let sentimentLabel = "Netral";
            let sentimentClass = "sentiment-neutral";
            
            if (sentimentScore >= 70) {
                sentimentLabel = "Positif";
                sentimentClass = "sentiment-positive";
            } else if (sentimentScore <= 30) {
                sentimentLabel = "Negatif";
                sentimentClass = "sentiment-negative";
            }
            
            // Generate sentiment description
            let sentimentDescription = "";
            if (sentimentLabel === "Positif") {
                sentimentDescription = "Teks Anda memiliki nada yang positif dan konstruktif.";
            } else if (sentimentLabel === "Negatif") {
                sentimentDescription = "Teks Anda cenderung negatif. Pertimbangkan untuk menggunakan bahasa yang lebih konstruktif.";
            } else {
                sentimentDescription = "Teks Anda memiliki nada yang netral.";
            }
            
            return {
                score: Math.round(sentimentScore),
                label: sentimentLabel,
                class: sentimentClass,
                description: sentimentDescription,
                positiveWords: positiveWordsFound,
                negativeWords: negativeWordsFound
            };
        }

        // Analyze ethics
        function analyzeEthics(text) {
            let ethicsScore = 100;
            const words = text.toLowerCase();
            let inappropriateWordsFound = [];
            let saraWordsFound = [];
            
            // Check for inappropriate words
            inappropriateWords.forEach(word => {
                if (words.includes(word)) {
                    ethicsScore -= 15;
                    inappropriateWordsFound.push(word);
                }
            });
            
            // Check for SARA words
            saraWords.forEach(word => {
                if (words.includes(word)) {
                    ethicsScore -= 20;
                    saraWordsFound.push(word);
                }
            });
            
            // Check for constructive language
            let constructiveCount = 0;
            constructiveWords.forEach(word => {
                if (words.includes(word)) {
                    constructiveCount++;
                }
            });
            
            // Adjust score based on constructive language
            if (constructiveCount > 0) {
                ethicsScore += Math.min(constructiveCount * 3, 15);
            }
            
            // Check text length
            if (text.length < 50) {
                ethicsScore -= 5;
            }
            
            // Ensure score is within bounds
            ethicsScore = Math.max(0, Math.min(100, ethicsScore));
            
            // Generate ethics description
            let ethicsDescription = "";
            if (ethicsScore >= 80) {
                ethicsDescription = "Teks Anda memenuhi standar etika yang tinggi.";
            } else if (ethicsScore >= 60) {
                ethicsDescription = "Teks Anda cukup etis, tetapi ada ruang untuk perbaikan.";
            } else {
                ethicsDescription = "Teks Anda memiliki masalah etika yang perlu diperbaiki.";
            }
            
            return {
                score: Math.round(ethicsScore),
                description: ethicsDescription,
                inappropriateWords: inappropriateWordsFound,
                saraWords: saraWordsFound
            };
        }

        // Detect bias
        function detectBias(text) {
            const words = text.toLowerCase();
            let biasCategories = [];
            let biasWordsFound = [];
            
            // Check for bias in each category
            Object.keys(biasWords).forEach(category => {
                biasWords[category].forEach(word => {
                    if (words.includes(word)) {
                        if (!biasCategories.includes(category)) {
                            biasCategories.push(category);
                        }
                        if (!biasWordsFound.includes(word)) {
                            biasWordsFound.push(word);
                        }
                    }
                });
            });
            
            // Determine bias level
            let biasLevel = "Rendah";
            if (biasCategories.length > 2) {
                biasLevel = "Tinggi";
            } else if (biasCategories.length > 0) {
                biasLevel = "Sedang";
            }
            
            return {
                level: biasLevel,
                categories: biasCategories,
                words: biasWordsFound
            };
        }

        // Generate recommendations
        function generateRecommendations(sentiment, ethics, bias, wordCheck) {
            const recommendations = [];
            
            // Sentiment-based recommendations
            if (sentiment.score < 40) {
                recommendations.push("Pertimbangkan untuk menggunakan bahasa yang lebih positif dan konstruktif.");
            }
            
            if (sentiment.score > 80) {
                recommendations.push("Pastikan aspirasi Anda tetap realistis dan dapat diimplementasikan.");
            }
            
            // Ethics-based recommendations
            if (ethics.score < 70) {
                recommendations.push("Hindari penggunaan kata-kata yang tidak pantas atau tidak sopan.");
            }
            
            if (wordCheck.detectedInappropriate.length > 0) {
                recommendations.push(`Hapus kata-kata tidak pantas: ${wordCheck.detectedInappropriate.join(', ')}`);
            }
            
            if (wordCheck.detectedSara.length > 0) {
                recommendations.push(`Hapus kata-kata SARA: ${wordCheck.detectedSara.join(', ')}`);
            }
            
            // Bias-based recommendations
            if (bias.level === "Tinggi") {
                recommendations.push("Kurangi referensi pada suku, agama, ras, atau golongan tertentu untuk menghindari bias.");
            }
            
            if (bias.categories.length > 0) {
                recommendations.push(`Aspirasi Anda menyentuh topik ${bias.categories.join(', ')}. Pastikan untuk bersikap netral dan inklusif.`);
            }
            
            // General recommendations
            if (recommendations.length === 0) {
                recommendations.push("Aspirasi Anda sudah cukup baik. Pertimbangkan untuk menambahkan detail atau contoh konkret.");
            }
            
            return recommendations;
        }

        // Get analysis details
        function getAnalysisDetails(text) {
            const words = text.toLowerCase().split(/\s+/);
            let positiveKeywords = [];
            let negativeKeywords = [];
            let inappropriateWordsFound = [];
            let saraWordsFound = [];
            let constructiveCount = 0;
            
            // Analyze words
            words.forEach(word => {
                if (positiveWords.includes(word) && !positiveKeywords.includes(word)) {
                    positiveKeywords.push(word);
                }
                if (negativeWords.includes(word) && !negativeKeywords.includes(word)) {
                    negativeKeywords.push(word);
                }
                if (inappropriateWords.includes(word) && !inappropriateWordsFound.includes(word)) {
                    inappropriateWordsFound.push(word);
                }
                if (saraWords.includes(word) && !saraWordsFound.includes(word)) {
                    saraWordsFound.push(word);
                }
                if (constructiveWords.includes(word)) {
                    constructiveCount++;
                }
            });
            
            // Determine constructive level
            let constructiveLevel = "Rendah";
            if (constructiveCount > 3) {
                constructiveLevel = "Tinggi";
            } else if (constructiveCount > 1) {
                constructiveLevel = "Sedang";
            }
            
            return {
                positiveKeywords: positiveKeywords.length > 0 ? positiveKeywords.join(', ') : "Tidak ada",
                negativeKeywords: negativeKeywords.length > 0 ? negativeKeywords.join(', ') : "Tidak ada",
                inappropriateWords: inappropriateWordsFound.length > 0 ? inappropriateWordsFound.join(', ') : "Tidak ada",
                saraWords: saraWordsFound.length > 0 ? saraWordsFound.join(', ') : "Tidak ada",
                constructiveLevel: constructiveLevel
            };
        }

        // Event listener for AI analysis button
        document.getElementById('analyzeBtn').addEventListener('click', function() {
            const text = document.getElementById('aiAnalysisText').value.trim();
            
            if (text.length === 0) {
                alert('Masukkan teks untuk dianalisis.');
                return;
            }
            
            analyzeText(text).then(result => {
                // Update sentiment results
                document.getElementById('sentimentScore').textContent = `${result.sentiment.score}%`;
                document.getElementById('sentimentScore').className = `sentiment-score ${result.sentiment.class}`;
                document.getElementById('sentimentLabel').textContent = result.sentiment.label;
                document.getElementById('sentimentLabel').className = `sentiment-label ${result.sentiment.class}`;
                document.getElementById('sentimentDescription').textContent = result.sentiment.description;
                
                // Update ethics results
                document.getElementById('ethicsScoreFill').style.width = `${result.ethics.score}%`;
                document.getElementById('ethicsScoreText').textContent = `${result.ethics.score}%`;
                document.getElementById('ethicsDescription').textContent = result.ethics.description;
                
                // Update bias results
                document.getElementById('biasLevel').textContent = `Tingkat Bias: ${result.bias.level}`;
                
                const biasIndicators = document.getElementById('biasIndicators');
                biasIndicators.innerHTML = '';
                
                if (result.bias.categories.length > 0) {
                    result.bias.categories.forEach(category => {
                        const indicator = document.createElement('span');
                        indicator.className = `bias-indicator ${result.bias.level === 'Tinggi' ? 'high' : ''}`;
                        indicator.textContent = category;
                        biasIndicators.appendChild(indicator);
                    });
                } else {
                    biasIndicators.innerHTML = '<span>Tidak terdeteksi bias signifikan</span>';
                }
                
                // Update recommendations
                const recommendationsList = document.getElementById('recommendationsList');
                recommendationsList.innerHTML = '';
                
                result.recommendations.forEach(rec => {
                    const li = document.createElement('li');
                    li.innerHTML = `<i class="fas fa-check-circle"></i> ${rec}`;
                    recommendationsList.appendChild(li);
                });
                
                // Update analysis details
                document.getElementById('positiveKeywords').textContent = result.details.positiveKeywords;
                document.getElementById('negativeKeywords').textContent = result.details.negativeKeywords;
                document.getElementById('inappropriateWords').textContent = result.details.inappropriateWords;
                document.getElementById('saraWords').textContent = result.details.saraWords;
                document.getElementById('constructiveLevel').textContent = result.details.constructiveLevel;
            });
        });

        // Event listener for clear analysis button
        document.getElementById('clearAnalysisBtn').addEventListener('click', function() {
            document.getElementById('aiAnalysisText').value = '';
            document.getElementById('aiAnalysisResults').style.display = 'none';
            document.getElementById('ethicsAlert').style.display = 'none';
            document.getElementById('saraAlert').style.display = 'none';
            document.getElementById('successAlert').style.display = 'none';
            document.getElementById('wordCounter').textContent = '0/5000 karakter';
            document.getElementById('wordCounter').classList.remove('warning');
        });

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Any initialization code would go here
        });
    </script>
</body>
</html>
